:root { --stickyTop: 64px; }

* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:#0f172a;
  background:#ffffff;
}
h1,h3 { margin: 0; }

/* Header */
.app-header{
  display:flex; justify-content:space-between; align-items:center;
  padding:10px 16px; background:#0b4a99; color:#fff; position:sticky; top:0; z-index:1000;
  box-shadow:0 2px 4px rgba(0,0,0,.08);
}
.app-header .brand{display:flex; gap:10px; align-items:center;}
.app-header .brand img{border-radius:6px; background:#fff;}
.app-header .header-actions button,
.app-header .header-actions a{margin-left:8px}

/* KPIs */
#kpis{display:grid; grid-template-columns: repeat(6, minmax(120px,1fr)); gap:10px; padding:10px 16px;}
.kpi{background:#f8fafc; border:1px solid #e5e7eb; border-radius:8px; padding:8px 12px;}
.kpi div{font-size:12px; color:#6b7280;}
.kpi strong{font-size:18px;}

/* Filtros */
#filters{padding:8px 16px;}
#filters .row{display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-bottom:6px;}
#filters label{font-size:12px; color:#475569}

/* Gráficos */
#charts{display:grid; grid-template-columns: 2fr 1fr 1fr; gap:12px; padding:8px 16px;}
.card{border:1px solid #e5e7eb; border-radius:8px; padding:10px; background:#fff; height: 280px;}
.card h3{font-size:14px; margin-bottom:8px; color:#334155}
#charts .card canvas{ width:100% !important; height:220px !important; }

/* Scroll superior sincronizado */
#top-scroll{height:12px; overflow:auto; margin:0 16px;}

/* Tabla */
.table-wrap{
  margin: 8px 16px;
  overflow: auto;              /* scroll horizontal y vertical si hace falta */
}
.table-wrap table{
  border-collapse: collapse;
  width: max-content;          /* ancho real según columnas */
  min-width: 100%;             /* pero no menos que el contenedor */
}
/* encabezado fijo */
.table-wrap thead th{
  position: sticky;
  top: var(--stickyTop, 64px); /* SOLO header azul */
  z-index: 3;
  background: #fff;
  border-bottom: 2px solid #e5e5e5;
}
/* celdas */
.table-wrap th,
.table-wrap td{
  border:1px solid #e5e7eb;
  padding: 8px 10px;
  line-height: 1.15;
  vertical-align: top;
  white-space: nowrap;
}

.pager{padding:8px 16px; display:flex; gap:8px; align-items:center;}
.pager button{padding:6px 10px}


/* === Patch vFinal: tabla y filtros === */
.table-wrap table{ border-collapse: collapse; width:100%; }
.table-wrap thead th{ position: sticky; top: var(--stickyTop,64px); background:#fff; z-index: 5; }
.table-wrap thead, .table-wrap tbody, .table-wrap tr, .table-wrap th, .table-wrap td{ margin:0; padding:0; }
.table-wrap th, .table-wrap td{ padding: 8px 10px; }
.table-wrap thead tr::before{ content:none !important; } /* evita filas fantasma por estilos de usuario */
#filters .row{ display:flex; flex-wrap:nowrap; gap:8px; align-items:center; overflow:auto; }
#filters select, #filters input{ max-width:170px; }


@media (min-width: 1100px){
  #filters .row{ display:flex; flex-wrap:nowrap; gap:8px; align-items:center; }
  #filters select, #filters input[type="text"], #filters input[type="date"]{ max-width: 180px; }
}

/* === FINAL PATCH (no-risk) === */
:root{ --stickyTop:64px; }

/* Encabezado fijo sin filas encima */
.table-wrap table{ border-collapse: collapse; width:100%; border-spacing:0; }
.table-wrap thead th{ position: sticky; top: var(--stickyTop); background:#fff; z-index: 5; }
.table-wrap thead tr::before{ content:none !important; } /* evita filas fantasma */
.table-wrap th, .table-wrap td{ padding:8px 10px; }

/* Filtros en una sola línea en desktop */
@media (min-width: 1100px){
  #filters .row{ display:flex; flex-wrap:nowrap; gap:8px; align-items:center; overflow:auto; }
  #filters select, #filters input[type="text"], #filters input[type="date"]{ max-width: 180px; }
}

/* Evitar scroll lateral cuando sea posible (sin romper datos) */
.table-wrap td{ word-break: break-word; }

:root{ --stickyTop:64px; }

/* Encabezado fijo arriba (sin filas fantasma) */
.table-wrap table{ border-collapse: collapse; width:100%; border-spacing:0; }
.table-wrap thead th{ position: sticky; top: var(--stickyTop); background:#fff; z-index: 5; }
.table-wrap thead tr::before{ content:none !important; }
.table-wrap th, .table-wrap td{ padding:8px 10px; }

/* Filtros en una sola línea en desktop */
@media (min-width: 1100px){
  #filters .row{ display:flex; flex-wrap:nowrap; gap:8px; align-items:center; overflow:auto; }
  #filters select, #filters input[type="text"], #filters input[type="date"]{ max-width: 180px; }
}

/* ... (mantén el resto del CSS) ... */

/* === CSS PATCH: evitar solapamiento del header === */
.table-wrap thead th {
  position: sticky !important;
  top: var(--stickyTop, 64px) !important;
  z-index: 9999 !important;
  background: #fff !important;
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
}
.table-wrap { padding-top: 8px; }
.table-wrap table { border-collapse: collapse; width:100%; border-spacing:0; table-layout: fixed; }
.table-wrap th, .table-wrap td { white-space: normal; word-break: break-word; }


