:root { --stickyTop: 64px; }

* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color:#0f172a;
  background:#ffffff;
}
h1,h3 { margin: 0; }

/* Header */
.app-header{
  display:flex; justify-content:space-between; align-items:center;
  padding:10px 16px; background:#0b4a99; color:#fff; position:sticky; top:0; z-index:1000;
  box-shadow:0 2px 4px rgba(0,0,0,.08);
}
.app-header .brand{display:flex; gap:10px; align-items:center;}
.app-header .brand img{border-radius:6px; background:#fff;}
.app-header .header-actions button,
.app-header .header-actions a{margin-left:8px}

/* KPIs */
#kpis{
  display:flex;
  flex-wrap:nowrap;
  gap:10px;
  padding:10px 16px;
  overflow-x:auto;
}
.kpi{
  min-width: 180px;
}

.kpi{
  background:#f8fafc;
  border:1px solid #e5e7eb;
  border-radius:8px;
  padding:8px 12px;
}
.kpi div{font-size:12px; color:#6b7280;}
.kpi strong{font-size:18px;}

/* Filtros */
#filters{padding:8px 16px;}
#filters .row{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:center;
  margin-bottom:6px;
}
#filters label{font-size:12px; color:#475569}
#filters select, #filters input{
  font-size:12px;
  padding:4px 6px;
}

/* Gráficos */
#charts{
  display:grid;
  grid-template-columns: 2fr 1fr 1fr;
  gap:12px;
  padding:8px 16px;
}
.card{
  border:1px solid #e5e7eb;
  border-radius:8px;
  padding:10px;
  background:#fff;
  height: 280px;
}
.card h3{
  font-size:14px;
  margin-bottom:8px;
  color:#334155
}
#charts .card canvas{
  width:100% !important;
  height:220px !important;
}

/* Scroll superior sincronizado */
#top-scroll{height:12px; overflow:auto; margin:0 16px;}

/* ================== TABLA PRINCIPAL ================== */

.table-wrap{
  margin: 8px 16px 40px;
  border: 1px solid #e5e7eb;
  border-radius: 4px;
  background: #ffffff;
  overflow: auto;              /* scroll horizontal/vertical si hace falta */
}

/* La tabla ocupa al menos el ancho del contenedor y se expande según contenido */
.table-wrap table{
  width: 100%;
  border-collapse: collapse;
  border-spacing: 0;
  table-layout: auto;
  font-size: 12px;
}

/* Encabezados */
.table-wrap thead th{
  position: sticky !important;
  /* Valor fijo: pegado justo debajo de los filtros / gráfica */
  top: 0px !important;               /* AJUSTABLE: prueba 200–220 según tu pantalla */
  z-index: 9999 !important;

  background: #e5e7eb !important;
  color: #111827;
  font-weight: 600;
  padding: 6px 8px;
  border-bottom: 1px solid #9ca3af;
  border-right: 1px solid #d1d5db;
  white-space: nowrap;
  text-align: left;
}

/* Celdas */
.table-wrap tbody td{
  padding: 4px 8px;
  border-bottom: 1px solid #f3f4f6;
  border-right: 1px solid #f3f4f6;
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  vertical-align: top;
}

/* Zebra para facilitar lectura */
.table-wrap tbody tr:nth-child(even){
  background-color: #f9fafb;
}

/* Hover sutil para fila */
.table-wrap tbody tr:hover{
  background-color: #eef2ff;
}

/* Columnas de fecha centradas */
.table-wrap td[data-col="FECHA F8"],
.table-wrap td[data-col="RECIBO F8"],
.table-wrap td[data-col="ASIGNACIÓN"],
.table-wrap td[data-col="SALIDA"],
.table-wrap td[data-col="DESPACHO"],
.table-wrap td[data-col="FACTURACIÓN"],
.table-wrap td[data-col="EMPACADO"],
.table-wrap td[data-col="PROY. ENTREGA"],
.table-wrap td[data-col="ENTREGA REAL"]{
  text-align: center;
}

/* Columnas numéricas alineadas a la derecha */
.table-wrap td[data-col="CANT. ASIG."],
.table-wrap td[data-col="CANT. SOL."],
.table-wrap td[data-col="RENGLONES ASI."],
.table-wrap td[data-col="RENGLONES SOL."],
.table-wrap td[data-col="TIEMPO"],
.table-wrap td[data-col="FILL CANT."],
.table-wrap td[data-col="FILL RENGL."]{
  text-align: right;
}

/* Celdas con texto largo permitimos varias líneas */
.table-wrap td[data-col="COMENT."],
.table-wrap td[data-col="SUSTANCIAS"]{
  white-space: normal;
}

/* Celda editable */
td.editable {
  cursor: pointer;
  background: #fffbeb;
}

/* ================== PAGINACIÓN ================== */
.pager{
  padding:8px 16px;
  display:flex;
  gap:8px;
  align-items:center;
}
.pager button{
  padding:6px 10px;
  font-size:12px;
}

/* ================== FILTROS (ajuste desktop) ================== */
@media (min-width: 1100px){
  #filters .row{
    display:flex;
    flex-wrap:nowrap;
    gap:8px;
    align-items:center;
    overflow:auto;
  }
  #filters select,
  #filters input[type="text"],
  #filters input[type="date"]{
    max-width: 160px;
    white-space: nowrap;
  }
}
/* Estados de completado y fill-rate */
td.state-ok{
  background-color:#dcfce7;  /* verde claro */
  color:#166534;
  font-weight:600;
}
td.state-bad{
  background-color:#fee2e2;  /* rojo claro */
  color:#991b1b;
  font-weight:600;
}
td.fill-high{
  background-color:#dbeafe;  /* azul claro */
  color:#1d4ed8;
}
td.fill-medium{
  background-color:#fef9c3;  /* amarillo claro */
  color:#854d0e;
}
td.fill-low{
  background-color:#fee2e2;  /* rojo claro */
  color:#991b1b;
}
