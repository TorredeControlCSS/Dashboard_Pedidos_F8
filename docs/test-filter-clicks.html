<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Filter Clicks</title>
    <style>
        body {
            margin: 0;
            font-family: system-ui, -apple-system, sans-serif;
        }
        
        /* Simular el header */
        .header {
            padding: 16px;
            background: #0b4a99;
            color: white;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        /* Simular KPIs */
        .kpis {
            display: flex;
            gap: 10px;
            padding: 10px 16px;
            overflow-x: auto;
        }
        .kpi {
            min-width: 180px;
            background: #f8fafc;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 8px 12px;
        }
        
        /* FILTROS - CON FIX */
        #filters {
            padding: 8px 16px 12px;
            position: relative;
            z-index: 10;
            background: #fff;
        }
        
        #filters .row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
        }
        
        #filters select,
        #filters input[type="date"] {
            border-radius: 6px;
            border: 1px solid #d1d5db;
            padding: 4px 8px;
            font-size: 13px;
            background-color: #fff;
            min-width: 150px;
        }
        
        #filters button {
            border-radius: 6px;
            padding: 4px 12px;
            border: none;
            font-size: 13px;
            cursor: pointer;
            background: #2563eb;
            color: #fff;
        }
        
        /* CHARTS - CON FIX */
        #charts {
            margin: 8px 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            position: relative;
            z-index: 1;
        }
        
        .card {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 10px;
            background: #fff;
            position: relative;
            overflow: hidden;
            height: 260px;
        }
        
        .fake-canvas {
            width: 100%;
            height: 210px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: block;
            max-width: 100%;
        }
        
        /* Test info */
        .test-info {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            font-size: 14px;
            display: none;
        }
        
        .test-info.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Test: Filter Clicks</h1>
        <p style="margin: 5px 0 0 0; font-size: 13px; opacity: 0.9;">
            Prueba hacer click en los filtros y fechas de abajo
        </p>
    </div>
    
    <div class="kpis">
        <div class="kpi">
            <div>Total</div>
            <strong>156</strong>
        </div>
        <div class="kpi">
            <div>Asignado</div>
            <strong>142</strong>
        </div>
        <div class="kpi">
            <div>Solicitado</div>
            <strong>14</strong>
        </div>
    </div>
    
    <section id="filters">
        <div class="row">
            <select id="fCat">
                <option value="">Todas las categorías</option>
                <option value="CAT1">Categoría 1</option>
                <option value="CAT2">Categoría 2</option>
                <option value="CAT3">Categoría 3</option>
            </select>
            
            <select id="fUnidad">
                <option value="">Todas las unidades</option>
                <option value="UNIDAD1">Unidad 1</option>
                <option value="UNIDAD2">Unidad 2</option>
                <option value="UNIDAD3">Unidad 3</option>
            </select>
            
            <select id="fComent">
                <option value="">Todos los comentarios</option>
                <option value="DISCREPANCIA DE INVENTARIO">DISCREPANCIA DE INVENTARIO</option>
                <option value="FALTA DE PERSONAL">FALTA DE PERSONAL</option>
                <option value="ENTREGADO">ENTREGADO</option>
            </select>
            
            <input id="fDesde" type="date" placeholder="Desde"/>
            <span style="padding: 0 4px; color: #6b7280;">a</span>
            <input id="fHasta" type="date" placeholder="Hasta"/>
            
            <button id="btnTest">Test Click</button>
        </div>
    </section>
    
    <section id="charts">
        <div class="card">
            <h3>Gráfico de Evolución (Simulado)</h3>
            <div class="fake-canvas"></div>
        </div>
        
        <div class="card">
            <h3>Otro Gráfico (Simulado)</h3>
            <div class="fake-canvas" style="height: 150px;"></div>
        </div>
    </section>
    
    <div class="test-info" id="testInfo">
        ✅ Cambio detectado en filtro!
    </div>
    
    <script>
        // Test de detección de clicks y cambios
        const filters = ['fCat', 'fUnidad', 'fComent', 'fDesde', 'fHasta'];
        const testInfo = document.getElementById('testInfo');
        
        filters.forEach(id => {
            const el = document.getElementById(id);
            if (el) {
                el.addEventListener('click', () => {
                    console.log(`✓ Click detectado en ${id}`);
                });
                
                el.addEventListener('change', () => {
                    console.log(`✓ Cambio detectado en ${id}:`, el.value);
                    testInfo.textContent = `✅ Cambio detectado en ${id}!`;
                    testInfo.classList.add('show');
                    setTimeout(() => {
                        testInfo.classList.remove('show');
                    }, 2000);
                });
                
                // Para date inputs, también detectar cuando se abre el picker
                if (el.type === 'date') {
                    el.addEventListener('focus', () => {
                        console.log(`✓ Date picker abierto en ${id}`);
                    });
                }
            }
        });
        
        document.getElementById('btnTest').addEventListener('click', () => {
            alert('✅ El botón funciona!\n\nAhora prueba:\n1. Click en los select para abrir dropdowns\n2. Click en los date inputs para abrir calendario\n3. Verifica que puedas seleccionar opciones con el mouse');
        });
        
        console.log('Test de filtros cargado. Instrucciones:');
        console.log('1. Haz click en cada select para verificar que el dropdown se abre');
        console.log('2. Selecciona opciones con el mouse');
        console.log('3. Haz click en los campos de fecha para abrir el calendario');
        console.log('4. Verifica que NO se cierre inmediatamente');
    </script>
</body>
</html>
